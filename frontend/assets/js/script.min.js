var url="http://localhost:5000";const carregamento=_=>{switch(_){case"mostrar":$.LoadingOverlay("show",{background:"rgba(0, 0, 0, 0.8)",image:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <g transform="translate(50 50)">
                    <g>
                <animateTransform attributeName="transform" type="rotate" values="0;45" keyTimes="0;1" dur="0.2s" repeatCount="indefinite"></animateTransform><path d="M29.491524206117255 -5.5 L37.491524206117255 -5.5 L37.491524206117255 5.5 L29.491524206117255 5.5 A30 30 0 0 1 24.742744050198738 16.964569457146712 L24.742744050198738 16.964569457146712 L30.399598299691117 22.621423706639092 L22.621423706639096 30.399598299691114 L16.964569457146716 24.742744050198734 A30 30 0 0 1 5.5 29.491524206117255 L5.5 29.491524206117255 L5.5 37.491524206117255 L-5.499999999999997 37.491524206117255 L-5.499999999999997 29.491524206117255 A30 30 0 0 1 -16.964569457146705 24.742744050198738 L-16.964569457146705 24.742744050198738 L-22.621423706639085 30.399598299691117 L-30.399598299691117 22.621423706639092 L-24.742744050198738 16.964569457146712 A30 30 0 0 1 -29.491524206117255 5.500000000000009 L-29.491524206117255 5.500000000000009 L-37.491524206117255 5.50000000000001 L-37.491524206117255 -5.500000000000001 L-29.491524206117255 -5.500000000000002 A30 30 0 0 1 -24.742744050198738 -16.964569457146705 L-24.742744050198738 -16.964569457146705 L-30.399598299691117 -22.621423706639085 L-22.621423706639092 -30.399598299691117 L-16.964569457146712 -24.742744050198738 A30 30 0 0 1 -5.500000000000011 -29.491524206117255 L-5.500000000000011 -29.491524206117255 L-5.500000000000012 -37.491524206117255 L5.499999999999998 -37.491524206117255 L5.5 -29.491524206117255 A30 30 0 0 1 16.964569457146702 -24.74274405019874 L16.964569457146702 -24.74274405019874 L22.62142370663908 -30.39959829969112 L30.399598299691117 -22.6214237066391 L24.742744050198738 -16.964569457146716 A30 30 0 0 1 29.491524206117255 -5.500000000000013 M0 -20A20 20 0 1 0 0 20 A20 20 0 1 0 0 -20" fill="#e15b64"></path></g></g>
                <!-- [ldio] generated by https://loading.io/ --></svg>`,imageColor:"#2cc415"});case"esconder":$.LoadingOverlay("hide")}},toggleCheck=_=>{1==_?$("#juridicas").is(":checked")?($("#rgCase").val(""),$("#bornDate").val(""),$("#cpfLabel").text("CPNJ"),$("#docInsertion").focus(),$("#docInsertion").attr("placeholder","Insira o CPNJ do Fornecedor..  (Required)"),$("#docInsertion").mask("00.000.000/0000-00"),$(".caseFisica").addClass("d-none")):($("#cpfLabel").text("CPF"),$("#docInsertion").focus(),$("#docInsertion").attr("placeholder","Insira o CPF do Fornecedor..  (Required)"),$("#docInsertion").mask("000.000.000-00"),$("#rgCase").mask("0.000.000"),$(".caseFisica").hasClass("d-none")&&$(".caseFisica").removeClass("d-none")):$("#juridicasEdit").is(":checked")?($("#rgCaseEdit").val(""),$("#bornDateEdit").val(""),$("#cpfLabelEdit").text("CPNJ"),$("#docEdition").focus(),$("#docEdition").attr("placeholder","Insira o CPNJ do Fornecedor..  (Required)"),$("#docEdition").mask("00.000.000/0000-00"),$(".caseFisica").addClass("d-none")):($("#cpfLabelEdit").text("CPF"),$("#docEdition").focus(),$("#docEdition").attr("placeholder","Insira o CPF do Fornecedor..  (Required)"),$("#docEdition").mask("000.000.000-00"),$("#rgCaseEdit").mask("0.000.000"),$(".caseFisica").hasClass("d-none")&&$(".caseFisica").removeClass("d-none"))},fornecedorEspecifico=async _=>{try{carregamento("mostrar");let e=await fetch(`${url}/v1/Producer/Find/${_}`);switch(e.status){case 200:{let a=await e.json();switch($("#modalEdit").modal("show"),$("#codForn").val(a.id),$("#nomeFornEdit").val(a.name),$("#companiesSelectEdit").val(a.empresaVinculada),$("#selectFieldEdit").val(a.uf),$("#inputTel1Edit").val(a.telefone_1),$("#inputTel2Edit").val(a.telefone_2),$("#inputTel3Edit").val(a.celular),$("#docEdition").val(a.document),a.tipoFornecedor){case"f":$("#fisicasEdit").prop("checked",!0),$("#bornDateEdit").val(a.dataNasc.split("-").reverse().join("/")),$("#rgCaseEdit").val(a.rg),toggleCheck(2);break;case"j":$("#juridicasEdit").prop("checked",!0),toggleCheck(2)}carregamento("esconder");break}case 404:throw carregamento("esconder"),"Fornecedor n\xe3o encontrado"}}catch(t){mensagem(t,2)}},atualizaDadosFornecedor=async()=>{$.LoadingOverlay("show",{background:"rgba(0, 0, 0, 0.8)",image:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
        <g transform="translate(50 50)">
            <g>
        <animateTransform attributeName="transform" type="rotate" values="0;45" keyTimes="0;1" dur="0.2s" repeatCount="indefinite"></animateTransform><path d="M29.491524206117255 -5.5 L37.491524206117255 -5.5 L37.491524206117255 5.5 L29.491524206117255 5.5 A30 30 0 0 1 24.742744050198738 16.964569457146712 L24.742744050198738 16.964569457146712 L30.399598299691117 22.621423706639092 L22.621423706639096 30.399598299691114 L16.964569457146716 24.742744050198734 A30 30 0 0 1 5.5 29.491524206117255 L5.5 29.491524206117255 L5.5 37.491524206117255 L-5.499999999999997 37.491524206117255 L-5.499999999999997 29.491524206117255 A30 30 0 0 1 -16.964569457146705 24.742744050198738 L-16.964569457146705 24.742744050198738 L-22.621423706639085 30.399598299691117 L-30.399598299691117 22.621423706639092 L-24.742744050198738 16.964569457146712 A30 30 0 0 1 -29.491524206117255 5.500000000000009 L-29.491524206117255 5.500000000000009 L-37.491524206117255 5.50000000000001 L-37.491524206117255 -5.500000000000001 L-29.491524206117255 -5.500000000000002 A30 30 0 0 1 -24.742744050198738 -16.964569457146705 L-24.742744050198738 -16.964569457146705 L-30.399598299691117 -22.621423706639085 L-22.621423706639092 -30.399598299691117 L-16.964569457146712 -24.742744050198738 A30 30 0 0 1 -5.500000000000011 -29.491524206117255 L-5.500000000000011 -29.491524206117255 L-5.500000000000012 -37.491524206117255 L5.499999999999998 -37.491524206117255 L5.5 -29.491524206117255 A30 30 0 0 1 16.964569457146702 -24.74274405019874 L16.964569457146702 -24.74274405019874 L22.62142370663908 -30.39959829969112 L30.399598299691117 -22.6214237066391 L24.742744050198738 -16.964569457146716 A30 30 0 0 1 29.491524206117255 -5.500000000000013 M0 -20A20 20 0 1 0 0 20 A20 20 0 1 0 0 -20" fill="#e15b64"></path></g></g>
        <!-- [ldio] generated by https://loading.io/ --></svg>`,imageColor:"#2cc415"});try{let _=await fetch(`${url}/v1/Producer/FindAll`),e=await _.json(),a=document.getElementById("tcorpo");$("#numbers").text(e.length),console.log(e);let t="";for(ct of e){let r=new Date(ct.dataCad);t+=`
            <tr class = "col columns">
            <th>
                ${ct.id}
            </th>
                <th>
                ${ct.name}
                </th>
                <th>
                    ${ct.document}
                </th>
                <th>
                    ${r.toLocaleString()}
                </th>
                <th>
                    <button class="btn" onclick="fornecedorEspecifico(${ct.id})">Editar</button>
                </th>
            </tr>
            
            `}a.innerHTML=t,$("#tableRegisters").DataTable({search:{smart:!0,regex:!0},searchDelay:350,language:{searchPlaceholder:"Pesquise por CPF, nome...",search:"Search:",info:"Exibindo _START_ at\xe9 _END_ de _TOTAL_ Linhas",zeroRecords:"Nada encontrado ;-;",emptyTable:"Nenhum registro encontrado - Cadastre um!"},data:e,columns:[{data:"id"},{data:"name"},{data:"document"},{data:"dataCad",render:function(_,e){let a=new Date(_);return a.toLocaleString()}},{data:"id",render:function(_,e){return`<button class="btn" onclick="fornecedorEspecifico(${_})"> Editar </button>`}}]});let o=document.getElementById("companiesSelect"),n=document.getElementById("companiesSelectEdit"),i=await fetch(`${url}/v1/Company`),s=await i.json(),d="";for(let c of s)d+=`<option value="${c.empresaId}">${c.name}</option>`;o.innerHTML=d,n.innerHTML=d,$.LoadingOverlay("hide")}catch(l){$.LoadingOverlay("hide"),mensagem("Algo deu errado!",2)}},atualizaDadosEmpresa=async()=>{try{carregamento("mostrar");let _=await fetch(`${url}/v1/Company`),e=await _.json(),a=document.getElementsByTagName("tbody")[0],t="";for(ct of e)t+=`
        <tr class="col columns">
                    <th>
                        ${ct.empresaId}
                    </th>
                    <th>
                        ${ct.name}
                    </th>
                    <th>
                        ${ct.document}
                    </th>
                    <th>
                        ${ct.uf}
                    </th>
                    <th>
                     <a class="editLink" onclick="carregarPara('editCompany.html?id=${ct.empresaId}')">Editar</a>
                    </th>

                </tr>
    `;a.innerHTML=t,$("#tableRegisters").DataTable({search:{smart:!0,regex:!0},language:{searchPlaceholder:"Pesquise por CNPJ, Nome da Empresa, etc...",search:"Search:",info:"Exibindo _START_ at\xe9 _END_ de _TOTAL_ Linhas",zeroRecords:"Nada encontrado ;-;",emptyTable:"Nenhum registro encontrado - Cadastre um!"},data:e,columns:[{data:"empresaId"},{data:"name"},{data:"document"},{data:"uf"},{data:"empresaId",render:function(_,e,a){return`<a class="editLink" onclick="carregarPara('editCompany.html?id=${_}')">Editar</a>`}}]}),carregamento("esconder");let r=document.getElementsByClassName("span-num")[0];r.textContent=e.length}catch(o){carregamento("esconder"),mensagem("Ocorreu um erro! Recarregue a p\xe1gina!",2,2e3)}},empresaDados=async()=>{try{let _=new URLSearchParams(document.location.search),e=_.get("id"),a=await fetch(`${url}/v1/GetCompanyById/${e}`),t=await a.json();$("#codEmp").val(t.empresaId),$("#empresaNome").val(t.name),$("#cnpjEmp").val(t.document),$("#estadosVal").val(t.uf)}catch(r){mensagem(r,2)}},carregarPara=(_,e=250)=>{$.LoadingOverlay("show",{background:"rgba(0, 0, 0, 0.8)",image:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
        <g transform="translate(50 50)">
            <g>
        <animateTransform attributeName="transform" type="rotate" values="0;45" keyTimes="0;1" dur="0.2s" repeatCount="indefinite"></animateTransform><path d="M29.491524206117255 -5.5 L37.491524206117255 -5.5 L37.491524206117255 5.5 L29.491524206117255 5.5 A30 30 0 0 1 24.742744050198738 16.964569457146712 L24.742744050198738 16.964569457146712 L30.399598299691117 22.621423706639092 L22.621423706639096 30.399598299691114 L16.964569457146716 24.742744050198734 A30 30 0 0 1 5.5 29.491524206117255 L5.5 29.491524206117255 L5.5 37.491524206117255 L-5.499999999999997 37.491524206117255 L-5.499999999999997 29.491524206117255 A30 30 0 0 1 -16.964569457146705 24.742744050198738 L-16.964569457146705 24.742744050198738 L-22.621423706639085 30.399598299691117 L-30.399598299691117 22.621423706639092 L-24.742744050198738 16.964569457146712 A30 30 0 0 1 -29.491524206117255 5.500000000000009 L-29.491524206117255 5.500000000000009 L-37.491524206117255 5.50000000000001 L-37.491524206117255 -5.500000000000001 L-29.491524206117255 -5.500000000000002 A30 30 0 0 1 -24.742744050198738 -16.964569457146705 L-24.742744050198738 -16.964569457146705 L-30.399598299691117 -22.621423706639085 L-22.621423706639092 -30.399598299691117 L-16.964569457146712 -24.742744050198738 A30 30 0 0 1 -5.500000000000011 -29.491524206117255 L-5.500000000000011 -29.491524206117255 L-5.500000000000012 -37.491524206117255 L5.499999999999998 -37.491524206117255 L5.5 -29.491524206117255 A30 30 0 0 1 16.964569457146702 -24.74274405019874 L16.964569457146702 -24.74274405019874 L22.62142370663908 -30.39959829969112 L30.399598299691117 -22.6214237066391 L24.742744050198738 -16.964569457146716 A30 30 0 0 1 29.491524206117255 -5.500000000000013 M0 -20A20 20 0 1 0 0 20 A20 20 0 1 0 0 -20" fill="#e15b64"></path></g></g>
        <!-- [ldio] generated by https://loading.io/ --></svg>`,imageColor:"#2cc415"}),setTimeout(()=>{location.href=_,$.LoadingOverlay("hide")},e)},mensagem=(_,e=1,a=1e3,t="left",r="bottom")=>{console.log($(".form-control"));let o=new Notyf({duration:a,position:{x:t,y:r}});switch(e){case 1:o.success(_);break;case 2:o.error(_)}};